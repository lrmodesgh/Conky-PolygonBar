##########################################
# Conky Theme  :  Polygon Bar
# Developed By :  lrmodes
# email id     :  lrmodes@gmail.com
# License      :  GPLV3
# For instructions see the README file
##########################################

# CONKY SETTINGS #
background yes
update_interval 1

cpu_avg_samples 2
net_avg_samples 2

double_buffer yes
no_buffers yes
#----------------------------------------------------------------------#

# WINDOW SETTINGS #
own_window yes
own_window_type desktop
own_window_transparent yes
own_window_hints undecorate,sticky,skip_taskbar,skip_pager,below

border_inner_margin 0
border_outer_margin 0

minimum_size 225 705
maximum_width 225

alignment tr
gap_x 10
gap_y 40

draw_shades no
draw_outline no
draw_borders no
draw_graph_borders no
#----------------------------------------------------------------------#

# LOADING LUA SCRIPTS #

lua_load ~/.conky/polygonbar/polygonbar.lua
lua_draw_hook_pre clock_rings
#----------------------------------------------------------------------#

# TEXT SETTINGS #

override_utf8_locale yes
use_xft yes
xftfont cantarell:size=20
xftalpha 1.0

uppercase no
 
default_color FFFFFF

text_buffer_size 2048

#----------------------------------------------------------------------#

# Variables that can be used: #

# ${time %I:%M:%S}
# ${fs_used_perc)%
# ${memperc}%
# ${cpu cpu0}%
#----------------------------------------------------------------------#

# Recycle Bin: #

# ${voffset 60}${offset 100}${cpu cpu0}% ${fs_used_perc}% ${memperc}%
#----------------------------------------------------------------------#

# DATA FIELDS #
TEXT
# Background Image #
${image ~/.conky/polygonbar/bar.png}
\
# Time, Date, Month Part #
\
 ${color ffffff}\
 ${font cantarell:pixelsize=15 style:bold}${voffset -30}${offset 170}\
 ${time %p}\
 ${font cantarell:pixelsize=20 style:bold}${voffset 05}${offset -200}\
 ${time %A}\
 ${font cantarell:pixelsize=30}${voffset 25}${offset -83}\
 ${time %d}\
 ${font cantarell:pixelsize=13 style:bold}${color ffffff}\
 ${time %B}\
 ${font cantarell:pixelsize=30}${voffset 15}${offset -98}\
 ${time %G}\
\
# Weather Part #
\
# Load Temperature Range, Temperature, Weather condition images, Pressure, Humidity, Windspeed icons #
\
 ${image /home/maverick/.conky/polygonbar/tem_ran.png -p 38,125 -s 24x24}\
 ${image /home/maverick/.conky/polygonbar/tem.png -p 100,125 -s 24x24}\
 ${image /home/maverick/.conky/polygonbar/con.png -p 160,125 -s 24x24}\
 ${image /home/maverick/.conky/polygonbar/pre.png -p 38,172 -s 24x24}\
 ${image /home/maverick/.conky/polygonbar/hum.png -p 100,172 -s 24x24}\
 ${image /home/maverick/.conky/polygonbar/win_spe.png -p 160,176 -s 24x24}\
\
 ${color ffffff}\
# 	Get Data from Yahoo Weather API using WOEID		(Chennai=2295424)#
\
 ${execi 300 curl -s "http://weather.yahooapis.com/forecastrss?w=2295424&u=c" -o ~/.cache/weather.xml} \
#	Extract Temperature Range = " Min + Max " from XML	#
\
 ${font cantarell:pixelsize=13}${voffset 50}${offset -150}\
 ${execi 300 grep "yweather:forecast" ~/.cache/weather.xml | grep -o "low=\"[^\"]*\"" | grep -o "\"[^\"]*\"" | grep -o "[^\"]*" | awk 'NR==1'}°/\
 ${execi 300 grep "yweather:forecast" ~/.cache/weather.xml | grep -o "high=\"[^\"]*\"" | grep -o "\"[^\"]*\"" | grep -o "[^\"]*" | awk 'NR==1'}\
#	Extract climatic Conditions = " Temperature + Status " Data from XML	#
\
 ${font cantarell:pixelsize=13}${voffset 00}${offset 23}\
 ${execi 300 grep "yweather:condition" ~/.cache/weather.xml | grep -o "temp=\"[^\"]*\"" | grep -o "\"[^\"]*\"" | grep -o "[^\"]*"}°\
 ${font cantarell:pixelsize=13}${voffset 00}${offset 20}\
 ${execi 300 grep "yweather:condition" ~/.cache/weather.xml | grep -o "text=\"[^\"]*\"" | grep -o "\"[^\"]*\"" | grep -o "[^\"]*"}\
#	Extract Pressure Data from XML	#
\
 ${font cantarell:pixelsize=13}${voffset 50}${offset -175}\
 ${execi 300 grep "yweather:atmosphere" ~/.cache/weather.xml | grep -o "pressure=\"[^\"]*\"" | grep -o "\"[^\"]*\"" | grep -o "[^\"]*"}\
 ${execi 300 grep "yweather:units" ~/.cache/weather.xml | grep -o "pressure=\"[^\"]*\"" | grep -o "\"[^\"]*\"" | grep -o "[^\"]*"}\
#	Extract Humidity Data from XML	#
\
 ${font cantarell:pixelsize=13}${voffset 00}${offset 10}\
 ${execi 300 grep "yweather:atmosphere" ~/.cache/weather.xml | grep -o "humidity=\"[^\"]*\"" | grep -o "\"[^\"]*\"" | grep -o "[^\"]*"}\
#	Extract Wind Speed Data from XML	#
\
 ${font cantarell:pixelsize=13}${voffset 00}${offset 12}\
 ${execi 300 grep "yweather:wind" ~/.cache/weather.xml | grep -o "speed=\"[^\"]*\"" | grep -o "\"[^\"]*\"" | grep -o "[^\"]*"}\
 ${execi 300 grep "yweather:units" ~/.cache/weather.xml | grep -o "speed=\"[^\"]*\"" | grep -o "\"[^\"]*\"" | grep -o "[^\"]*"}\
#-----------------------------------------------------------------------#
